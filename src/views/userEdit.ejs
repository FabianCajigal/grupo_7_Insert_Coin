<%- include('./partials/head', { stylesheet: "userEdit" }) %>

<%- include('./partials/header') %>

<main>

    <section>

        <article class="title">
            <h2>Editar perfil</h2>
        </article>

        <article class="form">
            <form action="/account/edit?_method=PUT" method="post" enctype="multipart/form-data" class="create-form">

                <div class="form-control">
                    <label for="email">Dirección de correo electrónico</label>
                    <input type="email" name="email" 
                    id="email" class="control" 
                    <% if (!locals.old) { %> value="<%= user.email %>" <% } %>
                    <% if (locals.old) { %> value="<%= locals.old && old.email %>" <% } %> required>
                    <% if(locals.errors && errors.email) { %>
                        <small class="text-danger"> <%= errors.email.msg %> </small>
                    <% } %>
                </div>

                <div class="form-control">
                    <label for="username">Usuario</label>
                    <input type="text" name="username" 
                    id="username" class="control" 
                    <% if (!locals.old) { %> value="<%= user.username %>" <% } %>
                    <% if (locals.old) { %> value="<%= locals.old && old.username %>" <% } %> required>
                    <% if(locals.errors && errors.username) { %>
                        <small class="text-danger"> <%= errors.username.msg %> </small>
                    <% } %>
                </div>

                <div class="form-control">
                    <label for="category">Categoría de usuario</label>
                    <select name="category" id="category" class="control" required>
                        <option disabled selected>Seleccionar...</option>
                        <option value="1" <% if (user.admin) { %> selected <% } %> >Administrador</option>
                        <option value="0" <% if (!user.admin) { %> selected <% } %> >Usuario</option>
                    </select>
                </div>
                
                <div class="form-control">
                    <label for="image">Imagen de perfil</label>
                    <input type="file" name="image" id="image" accept="image/*" class="control-picture">
                </div>
                
                <button type="submit">EDITAR</button>

            </form>
        </article>

    </section>

</main>

<%- include('./partials/footer') %>